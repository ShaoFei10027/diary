"use strict";(self.webpackChunkdiary=self.webpackChunkdiary||[]).push([[83],{50:function(n,e,t){t.d(e,{Xx:function(){return s},fq:function(){return h},Y:function(){return w},dD:function(){return f},a5:function(){return v},tI:function(){return p},J7:function(){return _},PR:function(){return d},x4:function(){return a},kS:function(){return l},fO:function(){return g},Cx:function(){return m},ym:function(){return x}});var r=t(419),i=t(5646),o=t(5850),c=function(n,e){return function(n){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=[];for(var o in e){var c="".concat(o,"=").concat(e[o]);t.push(c)}var u=t.join("&"),a=u?"".concat(n,"?").concat(u):n;return fetch(a,{credentials:"include"}).then((function(n){return n.json()})).catch((function(n){throw r.ZP.error(i.N.get("request_timeout")),new Error(n)}))}(o.F+n,e)},u=function(n,e){return function(n){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t={credentials:"include",method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},mode:"cors",cache:"force-cache",body:JSON.stringify(e)};return fetch(n,t).then((function(n){return n.json()})).catch((function(n){throw r.ZP.error(i.N.get("request_timeout")),new Error(n)}))}(o.F+n,e)},a=function(n){return u("/api/login",n)},s=function(){return c("/api/login")},l=function(){return u("/api/logout")},d=function(){return c("/api/user")},f=function(){return c("/api/articles")},h=function(n){return c("/api/article/".concat(n))},g=function(n){return u("/api/article",n)},p=function(){return c("/api/questions")},v=function(n){return c("/api/question/".concat(n))},m=function(n){return u("/api/question",n)},_=function(n){return c("/api/getTranslateData",n)},x=function(n){return u("/api/updateTransDate",n)},w=function(){return c("/api/getDulpTranslateData")}},8530:function(n,e,t){t.r(e),t.d(e,{default:function(){return k}});var r=t(6871),i=t(9439),o=t(2791),c=t(5646),u=t(9434),a=t(419),s=t(6090),l=t(1095),d=t(805),f=t(177),h=t(7309),g=t(50),p="index_container__0hKUt",v=t(184);function m(n){var e=n.visible,t=n.onClose,r=n.onLoginSuccess,u=l.Z.useForm(),s=(0,i.Z)(u,1)[0],m=(0,o.useState)(!1),_=(0,i.Z)(m,2),x=_[0],w=_[1],y=function(){s.validateFields().then((function(n){w(!0),(0,g.x4)(n).then((function(n){r(n)})).finally((function(){w(!1)}))})).catch((function(){a.ZP.error(c.N.get("Please_enter_your_account_and_password"))}))};return(0,o.useEffect)((function(){e||s&&s.resetFields()}),[s,e]),(0,v.jsx)(d.Z,{visible:e,onCancel:t,footer:null,children:(0,v.jsxs)("div",{className:p,children:[(0,v.jsxs)(l.Z,{form:s,children:[(0,v.jsx)(l.Z.Item,{label:c.N.get("account_number"),name:"user",rules:[{required:!0,message:""}],children:(0,v.jsx)(f.Z,{allowClear:!0,autoComplete:"off"})}),(0,v.jsx)(l.Z.Item,{label:c.N.get("password"),name:"pass",rules:[{required:!0,message:""}],children:(0,v.jsx)(f.Z.Password,{allowClear:!0,onPressEnter:y})})]}),(0,v.jsx)(h.Z,{type:"primary",onClick:y,loading:x,children:c.N.get("Sign_in")})]})})}var _=t(5192),x="index_header__UYG2S",w="index_logo__OU3Q-",y="index_title__2wlvk",b="index_menu__XEf2i",N=[{label:c.N.getChangeLang(),key:"lang"}];function j(){var n=(0,o.useState)(!1),e=(0,i.Z)(n,2),t=e[0],l=e[1],d=(0,u.v9)((function(n){return n.root})),f=d.isLogin,h=d.userInfo,p=(0,u.I0)(),j=(0,r.s0)();(0,o.useEffect)((function(){(0,g.Xx)().then((function(n){n.success&&(p((0,_.R9)()),p((0,_.ps)(n.data)))}))}),[]);var k=(0,o.useMemo)((function(){return f?N.concat([{label:h.account,key:"account",children:[{label:c.N.get("Personal_Center"),key:"userInfo"},{label:c.N.get("Log_out"),key:"logout"}].concat("admin"===h.role?[{label:c.N.get("Manage_background"),key:"admin"}]:[])}]).reverse():N.concat([{label:c.N.get("Sign_in"),key:"login"}]).reverse()}),[f,h.account,h.role]);return(0,v.jsxs)("div",{className:x,children:[(0,v.jsx)("div",{className:w,children:"Logo"}),(0,v.jsx)("div",{className:y,children:(0,v.jsx)("span",{style:{cursor:"pointer"},onClick:function(){j("/")},children:c.N.get("Front_end_knowledge_network")})}),(0,v.jsx)("div",{className:b,children:(0,v.jsx)(s.Z,{mode:"horizontal",selectable:!1,items:k,onClick:function(n){switch(n.key){case"lang":return void c.N.changeLang();case"login":return void l(!0);case"logout":return void(0,g.kS)().then((function(n){n.success&&(window.location.href=window.location.origin)}));case"admin":return void j("/admin");case"userInfo":return void j("/user")}}})}),(0,v.jsx)(m,{visible:t,onClose:function(){l(!1)},onLoginSuccess:function(n){n.success?(a.ZP.success(c.N.get("Login_succeeded")),p((0,_.R9)()),p((0,_.ps)(n.data)),l(!1)):a.ZP.error(c.N.get("The_account_does_not_exist_or_the_password_is_incorrect"))}})]})}function k(n){return(0,v.jsxs)("div",{children:[(0,v.jsx)(j,{}),(0,v.jsx)(r.j3,{})]})}},9025:function(n,e,t){var r;function i(n){if("undefined"===typeof document)return 0;if(n||void 0===r){var e=document.createElement("div");e.style.width="100%",e.style.height="200px";var t=document.createElement("div"),i=t.style;i.position="absolute",i.top="0",i.left="0",i.pointerEvents="none",i.visibility="hidden",i.width="200px",i.height="150px",i.overflow="hidden",t.appendChild(e),document.body.appendChild(t);var o=e.offsetWidth;t.style.overflow="scroll";var c=e.offsetWidth;o===c&&(c=t.clientWidth),document.body.removeChild(t),r=o-c}return r}function o(n){var e=n.match(/^(.*)px$/),t=Number(null===e||void 0===e?void 0:e[1]);return Number.isNaN(t)?i():t}function c(n){if("undefined"===typeof document||!n||!(n instanceof Element))return{width:0,height:0};var e=getComputedStyle(n,"::-webkit-scrollbar"),t=e.width,r=e.height;return{width:o(t),height:o(r)}}t.d(e,{Z:function(){return i},o:function(){return c}})}}]);
//# sourceMappingURL=83.9fd6e635.chunk.js.map